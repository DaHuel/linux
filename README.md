# linux lab2

<h2>Вопрос 1</h2>

```
  Размер = 512 байт
  Первая секция структуры MBR — это секция с исполняемым кодом, который и будет руководить дальнейшей загрузкой
  Далее идут 4 байта, отведенные на идентификацию диска. В операционных системах, где идентификация не используется, это место 
  может занимать исполняемый код. То же самое касается и последующих 2 байт
  Начиная со смещения 01BEh находится сама таблица разделов жесткого диска. Таблица состоит из 4 записей
  (по одной на каждый возможный раздел диска) размером 16 байт
  В конце структуры MBR всегда находится сигнатура AA55h. Она в какой-то степени позволяет проверить, что сектор MBR
  не поврежден и содержит необходимые данные.
```

<h2>Вопрос 2</h2>

```
Диск MBR допускает только четыре основных раздела.
Если нужно больше, то можно назначить один из разделов расширенным разделом, и на нём можно создавать больше подразделов или логических дисков.
```

<h2>Вопрос 3</h2>

<h3>Загрузка с BIOS</h3>

```
После выполнения различных проверок оборудования, BIOS определяет с какого устройства следует загружать операционную систему.
С загрузочного диска считывается нулевой сектор - MBR (Master Boot Record). MBR содержит информацию о том на какие разделы разбит диск, какой из этих разделов является активным, то есть с какого раздела можно загружаться. После определения активного раздела, с него загружается первый сектор, называемый boot-сектором. Этот boot-сектор должен содержать загрузочный код, определяемый операционной системой. BIOS передает управление в этот код, и на этом завершает свою работу. Далее уже начинает работать установленная операционная система.
```

<h3>Загрузка с UEFI</h3>

```
Запускается загрузчик EFI. Его задача — выбрать устройство для дальнейшей загрузки, аналогично выбору пользователем устройства при использовании BIOS.
После выбора устройства, загрузчик находит на диске системный раздел (EFI System partition) и загружает с него файл, отвечающий за дальнейшую загрузку операционной системы. Данный файл всегда расположен по одному адресу. Для amd64 это /efi/boot/bootx64.efi.
ESR определяется загрузчиком по определенному GUID и отформатирована в системе FAT.
После передачи управления загрузчику ОС из системного раздела ESR, дальнейший процесс продолжается как обычно и зависит от операционной системы.
```

<h2>Вопрос 4</h2>

<h3>Этапы загрузки с SysVinit</h3>

1. BIOS or UEFI;
2. Bootloader;
3. Kernel;
4. Запуск пользовательских служб с помощью SysVinit. Это первый процесс, который запускается после загрузки ядра, и тот, который порождает все другие процессы, он работает как демон init и обычно имеет PID 1. Он предоставляет стандартный процесс для управления тем, какие программы init запускает или останавливает на определенном уровене производительности. Работает, используя схему runlevels. Всего их 7 (от 0 до 6). init описывает весь процесс загрузки в своем конфигурационном файле /etc/inittab, откуда вызываются другие программы и скрипты на определенном этапе запуска.

<h3>Этапы загрузки с Systemd</h3>
   Все этапы вплоть до загрузки ядра аналогичны.
   
   Systemd вводит концепцию параллельного запуска. Он создает сокет для каждого демона, который необходимо запустить. Эти сокеты являются абстрактными для процесса, использующего их, поэтому они могут обеспечивать взаимодействие между различными демонами. . Systemd создает новые процессы и назначает каждому процессу контрольную группу (cgroup). Процессы в разных группах управления могут взаимодействовать друг с другом через ядро.systemd обрабатывает процесс загрузкиМетод очень красивый и слишком оптимизирован по сравнению с традиционной системой, основанной на инициализации.

<h2>Вопрос 5</h2>

Bootloader: GRUB;  
Версия ядра: 5.15.0-kali3;  
Система инициализации:   
<img src="https://github.com/DaHuel/linux/blob/task2/image.png"> 

<img src="https://github.com/DaHuel/linux/blob/task2/1.png?raw=true" />
